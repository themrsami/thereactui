{"version":3,"file":"Modal.js","sourceRoot":"","sources":["../../../components/ui/Modal/Modal.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { ModalProps } from './Modal.types';\r\nimport { X } from 'lucide-react';\r\n\r\nconst Modal = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  size = 'md',\r\n  closeOnBackdropClick = true,\r\n  closeOnEsc = true,\r\n  className = '',\r\n  overlayClassName = ''\r\n}: ModalProps) => {\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const previousFocusRef = useRef<HTMLElement | null>(null);\r\n\r\n  // Size classes following theReactUI principles\r\n  const sizeClasses = {\r\n    sm: 'max-w-md',\r\n    md: 'max-w-lg', \r\n    lg: 'max-w-2xl',\r\n    xl: 'max-w-4xl'\r\n  };\r\n\r\n  // Handle ESC key press\r\n  useEffect(() => {\r\n    if (!closeOnEsc) return;\r\n\r\n    const handleEsc = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEsc);\r\n    return () => document.removeEventListener('keydown', handleEsc);\r\n  }, [isOpen, onClose, closeOnEsc]);\r\n\r\n  // Focus management\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Store the previously focused element\r\n      previousFocusRef.current = document.activeElement as HTMLElement;\r\n      \r\n      // Focus the modal when it opens\r\n      modalRef.current?.focus();\r\n      \r\n      // Prevent body scroll\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      // Restore focus when modal closes\r\n      if (previousFocusRef.current) {\r\n        previousFocusRef.current.focus();\r\n      }\r\n      \r\n      // Restore body scroll\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isOpen]);\r\n\r\n  // Handle backdrop click\r\n  const handleBackdropClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n    if (closeOnBackdropClick && event.target === event.currentTarget) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Focus trap implementation\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n    if (event.key === 'Tab') {\r\n      const focusableElements = modalRef.current?.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      );\r\n      \r\n      if (focusableElements && focusableElements.length > 0) {\r\n        const firstElement = focusableElements[0] as HTMLElement;\r\n        const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\r\n        \r\n        if (event.shiftKey) {\r\n          if (document.activeElement === firstElement) {\r\n            event.preventDefault();\r\n            lastElement.focus();\r\n          }\r\n        } else {\r\n          if (document.activeElement === lastElement) {\r\n            event.preventDefault();\r\n            firstElement.focus();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Portal to render modal at document.body level\r\n  return createPortal(\r\n    <div\r\n      className={`fixed inset-0 z-50 flex items-center justify-center p-4 ${overlayClassName}`}\r\n      onClick={handleBackdropClick}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby={title ? 'modal-title' : undefined}\r\n    >\r\n      {/* Backdrop */}\r\n      <div className=\"fixed inset-0 bg-black/30 dark:bg-white/20\" />\r\n      \r\n      {/* Modal Content */}\r\n      <div\r\n        ref={modalRef}\r\n        className={`relative w-full ${sizeClasses[size]} bg-background text-foreground border border-foreground max-h-[90vh] overflow-auto shadow-lg ${className}`}\r\n        onClick={(e) => e.stopPropagation()}\r\n        onKeyDown={handleKeyDown}\r\n        tabIndex={-1}\r\n        style={{ zIndex: 1000 }}\r\n      >\r\n        {/* Header */}\r\n        {(title || true) && (\r\n          <div className=\"flex items-center justify-between p-6 border-b border-foreground text-foreground\">\r\n            {title && (\r\n              <h2 id=\"modal-title\" className=\"text-xl font-semibold text-foreground\">\r\n                {title}\r\n              </h2>\r\n            )}\r\n            <button\r\n              onClick={onClose}\r\n              className=\"ml-auto p-1 text-foreground hover:bg-foreground hover:text-background transition-colors\"\r\n              aria-label=\"Close modal\"\r\n            >\r\n              <X size={20} />\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Body */}\r\n        <div className=\"p-6 text-foreground\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n"]}